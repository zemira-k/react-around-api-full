{"version":3,"sources":["components/ProtectedRoute.js","contexts/CurrentUserContext.js","utils/api.js","components/Api.js","utils/auth.js","components/Header.js","components/Footer.js","components/Card.js","components/Main.js","components/Login.js","components/Register.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","images/Union.svg","images/UnionX.svg","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["ProtectedRoute","props","loggedIn","children","to","CurrentUserContext","React","createContext","api","baseUrl","costumFetch","url","options","fetch","then","res","ok","json","Promise","reject","statusText","this","_url","token","headers","authorization","id","isLiked","method","data","body","JSON","stringify","name","about","avatar","BaseUrl","Accept","checkResponse","status","Header","link","text","onSignOut","loggedin","email","className","onClick","Footer","Card","currentUser","useContext","isOwn","card","owner","_id","likes","includes","cardDeleteButtonClassName","cardLikeButtonClassName","onCardClick","type","src","alt","onCardDelete","onCardLike","length","Main","style","backgroundImage","onEditAvatarClick","onEditProfileClick","onAddPlaceClick","cards","map","cardEl","Login","useState","setEmail","password","setPassword","onSubmit","e","preventDefault","onLogin","placeholder","value","onChange","target","Register","onRegister","PopupWithForm","isOpen","onClose","header","buttonTitle","EditProfilePopup","setName","setAbout","useEffect","onUpdateUser","minLength","maxLength","required","pattern","EditAvatarPopup","linkInput","useRef","onUpdateAvatar","current","ref","AddPlacePopup","setLink","onAddPlaceSubmit","ImagePopup","InfoTooltip","isSuccessful","union","unionx","App","history","useHistory","setLoggedIn","infoToolTip","setInfoTooltip","localStorage","getItem","setToken","setCurrentUser","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","Authorization","auth","push","catch","err","console","log","getUserInfo","getInitialCards","handleSuccessTooltip","handleFailureTooltip","closeAllPopups","closeByEscape","key","document","addEventListener","removeEventListener","Provider","path","setItem","exact","removeItem","some","i","changeLikeCardStatus","newCard","state","c","deleteCard","filter","addCard","setUserInfo","setUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ed9d2c22.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nfunction ProtectedRoute({ ...props }) {\r\n  return (\r\n    <Route {...props}>\r\n      {() => (props.loggedIn ? props.children : <Redirect to=\"./signin\" />)}\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import Api from \"../components/Api\";\r\n\r\nconst api = new Api({\r\n  // baseUrl: \"http://localhost:3000\",\r\n  baseUrl: \"https://api.zemira.students.nomoreparties.site\",\r\n});\r\n\r\nexport default api;\r\n","class Api {\r\n  constructor({ baseUrl }) {\r\n    this._url = baseUrl;\r\n  }\r\n\r\n  costumFetch = (url, options) =>\r\n    fetch(url, options).then((res) =>\r\n      res.ok ? res.json() : Promise.reject(res.statusText),\r\n    );\r\n\r\n  getInitialCards(token) {\r\n    return this.costumFetch(`${this._url}/cards`, {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n  }\r\n\r\n  getUserInfo(token) {\r\n    return this.costumFetch(`${this._url}/users/me`, {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n  }\r\n\r\n  changeLikeCardStatus(id, isLiked, token) {\r\n    return this.costumFetch(`${this._url}/cards/${id}/likes`, {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n      method: `${isLiked ? \"PUT\" : \"DELETE\"}`,\r\n    });\r\n  }\r\n\r\n  deleteCard(id, token) {\r\n    return this.costumFetch(`${this._url}/cards/${id}`, {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n      method: \"DELETE\",\r\n    });\r\n  }\r\n\r\n  setUserInfo(data, token) {\r\n    return this.costumFetch(`${this._url}/users/me`, {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n      method: \"PATCH\",\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about,\r\n      }),\r\n    });\r\n  }\r\n\r\n  setUserAvatar(data, token) {\r\n    return this.costumFetch(`${this._url}/users/me/avatar`, {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n      method: \"PATCH\",\r\n      body: JSON.stringify({ avatar: data }),\r\n    });\r\n  }\r\n\r\n  addCard(data, token) {\r\n    return this.costumFetch(`${this._url}/cards`, {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${token}`,\r\n      },\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n}\r\n\r\nexport default Api;\r\n","// const BaseUrl = \"http://localhost:3000\";\r\nconst BaseUrl = \"https://api.zemira.students.nomoreparties.site\";\r\nconst headers = {\r\n  Accept: \"application/json\",\r\n  \"Content-Type\": \"application/json\",\r\n};\r\n\r\nfunction checkResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`${res.status}: ${res.statusText}`);\r\n\r\n  // console.log(\"response: \", res);\r\n  // return res.ok ? res.json() : Promise.reject(res.statusText);\r\n}\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BaseUrl}/signup`, {\r\n    method: \"POST\",\r\n    headers: headers,\r\n    body: JSON.stringify({\r\n      password,\r\n      email,\r\n    }),\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nexport const login = (password, email) => {\r\n  return fetch(`${BaseUrl}/signin`, {\r\n    method: \"POST\",\r\n    headers: headers,\r\n    body: JSON.stringify({\r\n      password,\r\n      email,\r\n    }),\r\n  })\r\n    .then((res) => checkResponse(res))\r\n    .then((data) => {\r\n      if (data.token) {\r\n        localStorage.setItem(\"jwt\", data.token);\r\n        return data;\r\n      }\r\n    });\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BaseUrl}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  }).then((res) => checkResponse(res));\r\n};\r\n","import { Link } from \"react-router-dom\";\r\n\r\nfunction Header({ link, text, onSignOut, loggedin, email }) {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__logo\"></div>\r\n      <div className=\"header__nav\">\r\n        {loggedin && (\r\n          <>\r\n            <p className=\"header__email\">{email}</p>\r\n            <Link to={link} onClick={onSignOut} className=\"header__link\">\r\n              sign out\r\n            </Link>\r\n          </>\r\n        )}\r\n\r\n        {!loggedin && (\r\n          <Link to={link} className=\"header__link\">\r\n            {text}\r\n          </Link>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyrights\">&copy; 2021 Around The U.S.</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = props.card.owner === currentUser._id;\r\n  // const isLiked = currentUser && props.card.likes.filter(currentUser._id);\r\n\r\n  const isLiked = props.card.likes.includes(currentUser._id);\r\n  // const isLiked = props.card.likes.some((i) => i === currentUser._id);\r\n\r\n  const cardDeleteButtonClassName = `element__btn element__btn_type_trash ${\r\n    isOwn ? \"element__btn_type_trash-visible\" : \"element__btn_type_trash-hidden\"\r\n  }`;\r\n  const cardLikeButtonClassName = `${\r\n    isLiked\r\n      ? \"element__name-heart element__name-heart_type_black\"\r\n      : \"element__name-heart\"\r\n  }`;\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    props.onCardDelete(props.card);\r\n  }\r\n\r\n  return (\r\n    <article className=\"element\">\r\n      <button\r\n        onClick={handleClick}\r\n        className=\"element__btn element__btn_type_image\"\r\n        type=\"button\"\r\n      >\r\n        <img\r\n          className=\"element__item\"\r\n          src={props.card.link}\r\n          alt={props.card.name}\r\n        />\r\n      </button>\r\n      <button\r\n        onClick={handleDeleteClick}\r\n        className={cardDeleteButtonClassName}\r\n        type=\"button\"\r\n      ></button>\r\n      <div className=\"element__name\">\r\n        <h2 className=\"element__name-text\">{props.card.name}</h2>\r\n        <div className=\"element__name-like\">\r\n          <button\r\n            onClick={handleLikeClick}\r\n            className={cardLikeButtonClassName}\r\n            type=\"button\"\r\n          ></button>\r\n          <span className=\"element__name-number\">\r\n            {props.card.likes.length}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","// import api from \"../utils/api\";\r\nimport React from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile\">\r\n        <div\r\n          className=\"profile__avatar\"\r\n          style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n        >\r\n          <button\r\n            onClick={props.onEditAvatarClick}\r\n            aria-label=\"profile__editbutton\"\r\n            className=\"profile__editbutton profile__editbutton_type_avatar\"\r\n            type=\"button\"\r\n          ></button>\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__caption\">\r\n            <h1 className=\"profile__name\" id=\"name\">\r\n              {currentUser.name}\r\n            </h1>\r\n            <button\r\n              onClick={props.onEditProfileClick}\r\n              aria-label=\"profile__editbutton\"\r\n              className=\"profile__editbutton profile__editbutton_type_data\"\r\n              type=\"button\"\r\n              id=\"btnOpen\"\r\n            ></button>\r\n          </div>\r\n          <p className=\"profile__task\" id=\"task\">\r\n            {currentUser.about}\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={props.onAddPlaceClick}\r\n          aria-label=\"add-pic\"\r\n          className=\"profile__big-rectangle\"\r\n          type=\"button\"\r\n        ></button>\r\n      </section>\r\n\r\n      <section className=\"elements\">\r\n        {props.cards.map((cardEl) => (\r\n          <Card\r\n            key={cardEl._id}\r\n            card={cardEl}\r\n            onCardClick={props.onCardClick}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}\r\n          />\r\n        ))}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onLogin({\r\n      email: email,\r\n      password: password,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"black-form\">\r\n      <p className=\"form__header black-form__header\">Sign in</p>\r\n      <form onSubmit={handleSubmit} className=\"form form_type_black\">\r\n        <input\r\n          className=\"form__input form__input_type_black\"\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <input\r\n          className=\"form__input form__input_type_black\"\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <button type=\"submit\" className=\"form__button form__button_container\">\r\n          <p type=\"submit\" className=\"form__link\">\r\n            Sign in\r\n          </p>\r\n        </button>\r\n      </form>\r\n\r\n      <div className=\"form__signin\">\r\n        <p className=\"form__signin-text\">Not a member yet? </p>\r\n        <Link to=\"signup\" className=\"form__signin-link\">\r\n          Sign up here!\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Register(props) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onRegister({\r\n      email: email,\r\n      password: password,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"black-form\">\r\n      <p className=\"form__header black-form__header\">Sign up</p>\r\n      <form onSubmit={handleSubmit} className=\"form form_type_black\">\r\n        <input\r\n          className=\"form__input form__input_type_black\"\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <input\r\n          className=\"form__input form__input_type_black\"\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <button type=\"submit\" className=\"form__button form__button_container\">\r\n          <p className=\"form__link\">Sign up</p>\r\n        </button>\r\n      </form>\r\n\r\n      <div className=\"form__signin\">\r\n        <p className=\"form__signin-text\">Already a member?</p>\r\n        <Link to=\"signin\" className=\"form__signin-link\">\r\n          Log in here!\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","function PopupWithForm(props) {\r\n  return (\r\n    <div\r\n      className={`popup popup_type_${props.name} ${\r\n        props.isOpen ? \"popup_opened\" : \"\"\r\n      }`}\r\n    >\r\n      <div className=\"popup__form\">\r\n        <button\r\n          onClick={props.onClose}\r\n          aria-label=\"popup__close\"\r\n          className={`popup__close popup__close_type_${props.name}`}\r\n          type=\"button\"\r\n          id=\"btnClose\"\r\n        ></button>\r\n        <form\r\n          onSubmit={props.onSubmit}\r\n          className={`form form_type_${props.name}`}\r\n          name={props.name}\r\n        >\r\n          <h2 className=\"form__header\">{props.header}</h2>\r\n          <fieldset className=\"form__set\">\r\n            {props.children}\r\n            <button\r\n              aria-label=\"submit\"\r\n              className={`form__button form__button_type_${props.name}`}\r\n              type=\"submit\"\r\n              // id=\"submit\"\r\n              value={props.buttonTitle}\r\n            >\r\n              {props.buttonTitle}\r\n            </button>\r\n          </fieldset>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState(\"\");\r\n  const [about, setAbout] = React.useState(\"\");\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setAbout(currentUser.about);\r\n  }, [currentUser, props.isOpen]);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeAbout(e) {\r\n    setAbout(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateUser({\r\n      name: name,\r\n      about: about,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <PopupWithForm\r\n        header=\"Edit profile\"\r\n        name=\"edit\"\r\n        buttonTitle=\"save\"\r\n        isOpen={props.isOpen}\r\n        onClose={props.onClose}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input\r\n          onChange={handleChangeName}\r\n          className=\"form__input form__input_type_name\"\r\n          type=\"text\"\r\n          name=\"formName\"\r\n          id=\"formName\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          required\r\n          pattern=\".*\\S.*\"\r\n          value={name || \"\"}\r\n        />\r\n        <span\r\n          className=\"form__input-error form__input-error_type_name form__input-error_active\"\r\n          id=\"formName-error\"\r\n        ></span>\r\n        <input\r\n          onChange={handleChangeAbout}\r\n          className=\"form__input form__input_type_about\"\r\n          type=\"text\"\r\n          name=\"formAbout\"\r\n          id=\"formAbout\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          required\r\n          pattern=\".*\\S.*\"\r\n          value={about || \"\"}\r\n        />\r\n        <span\r\n          className=\"form__input-error form__input-error_type_about form__input-error_active\"\r\n          id=\"formAbout-error\"\r\n        ></span>\r\n      </PopupWithForm>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const linkInput = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar({\r\n      avatar: linkInput.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"edit-avatar\"\r\n      header=\"Change profile picture\"\r\n      buttonTitle=\"save\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        ref={linkInput}\r\n        className=\"form__input form__input_type_link\"\r\n        type=\"url\"\r\n        name=\"avatarImageLink\"\r\n        id=\"avatarImageLink\"\r\n        required\r\n      />\r\n      <span\r\n        className=\"form__input-error form__input-error_type_link form__input-error_active\"\r\n        id=\"avatarImageLink-error\"\r\n      ></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [name, setName] = React.useState(\"\");\r\n  const [link, setLink] = React.useState(\"\");\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeLink(e) {\r\n    setLink(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onAddPlaceSubmit({\r\n      name: name,\r\n      link: link,\r\n    });\r\n    props.onClose();\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setName(\"\");\r\n    setLink(\"\");\r\n  }, [props.isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add\"\r\n      header=\"New place\"\r\n      buttonTitle=\"create\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input\r\n        onChange={handleChangeName}\r\n        className=\"form__input form__input_type_title\"\r\n        type=\"text\"\r\n        name=\"formTitle\"\r\n        id=\"formTitle\"\r\n        placeholder=\"Title\"\r\n        minLength=\"1\"\r\n        maxLength=\"30\"\r\n        required\r\n        pattern=\".*\\S.*\"\r\n        value={name}\r\n      />\r\n      <span\r\n        className=\"form__input-error form__input-error_type_title form__input-error_active\"\r\n        id=\"formTitle-error\"\r\n      ></span>\r\n      <input\r\n        onChange={handleChangeLink}\r\n        className=\"form__input form__input_type_img-link\"\r\n        type=\"url\"\r\n        name=\"formLink\"\r\n        id=\"formLink\"\r\n        placeholder=\"Image link\"\r\n        required\r\n        value={link}\r\n      />\r\n      <span\r\n        className=\"form__input-error form__input-error_type_img-link form__input-error_active\"\r\n        id=\"formLink-error\"\r\n      ></span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","function ImagePopup(props) {\r\n  return (\r\n    <div\r\n      className={`popup popup_type_image ${\r\n        props.card.name ? \"popup_opened\" : \"\"\r\n      }`}\r\n    >\r\n      <div className=\"popup__container\">\r\n        <button\r\n          onClick={props.onClose}\r\n          className=\"popup__close popup__close_type_image\"\r\n          type=\"button\"\r\n        ></button>\r\n        <figure className=\"popup__figure\">\r\n          <img\r\n            className=\"popup__image\"\r\n            src={props.card.link}\r\n            alt={props.card.name}\r\n          />\r\n          <figcaption className=\"popup__caption\">{props.card.name}</figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","export default __webpack_public_path__ + \"static/media/Union.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/UnionX.d4ce2a26.svg\";","import React from \"react\";\r\nimport union from \"../images/Union.svg\";\r\nimport unionx from \"../images/UnionX.svg\";\r\n\r\nfunction InfoTooltip(props) {\r\n  return (\r\n    <div\r\n      className={`popup popup_type_info ${props.isOpen ? \"popup_opened\" : \"\"}`}\r\n    >\r\n      <div className=\"popup__form\">\r\n        <button\r\n          onClick={props.onClose}\r\n          aria-label=\"popup__close\"\r\n          className={`popup__close`}\r\n          type=\"button\"\r\n          id=\"btnClose\"\r\n        ></button>\r\n        <div className=\"info\" name={props.name}>\r\n          <img\r\n            className=\"info__image\"\r\n            src={`${props.isSuccessful ? union : unionx}`}\r\n            alt={`${props.isSuccessful ? \"success\" : \"fail\"}`}\r\n          ></img>\r\n          <p className=\"info__text\">{`${\r\n            props.isSuccessful\r\n              ? \"Success! You have now been registered.\"\r\n              : \"Oops, something went wrong! Please try again.\"\r\n          }`}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import React, { useState } from \"react\";\r\nimport { Route, Switch, useHistory } from \"react-router-dom\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport api from \"../utils/api\";\r\nimport * as auth from \"../utils/auth\";\r\n// routs components\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport Main from \"./Main\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\n// popup components\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\n\r\nfunction App() {\r\n  const history = useHistory();\r\n\r\n  // states for login logout and register\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [infoToolTip, setInfoTooltip] = useState({\r\n    isOpen: false,\r\n    isSuccessful: false,\r\n  });\r\n  const [token, setToken] = useState(localStorage.getItem(\"jwt\"));\r\n\r\n  // states for cards and user\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n\r\n  // check if logged in\r\n  React.useEffect(() => {\r\n    // if user has a token in storage, check if it is valid\r\n    if (token) {\r\n      auth\r\n        .getContent(token)\r\n        .then((res) => {\r\n          setEmail(res.data.email);\r\n          setLoggedIn(true);\r\n          history.push(\"/\");\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      setLoggedIn(false);\r\n    }\r\n  }, [token, history]);\r\n\r\n  //get user info && cards\r\n  React.useEffect(() => {\r\n    if (token) {\r\n      api\r\n        .getUserInfo(token)\r\n        .then((res) => {\r\n          setCurrentUser(res.data);\r\n          api\r\n            .getInitialCards(token)\r\n            .then((cards) => {\r\n              setCards(cards);\r\n            })\r\n            .catch((err) => console.log(err));\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }, [token]);\r\n\r\n  // handles for cards\r\n  function handleAddPlaceSubmit(data) {\r\n    api\r\n      .addCard(data, token)\r\n      .then((newCard) => {\r\n        setCards([...cards, newCard.data]);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((i) => i === currentUser._id);\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked, token)\r\n      .then((newCard) => {\r\n        const { data } = newCard;\r\n        setCards((state) => state.map((c) => (c._id === card._id ? data : c)));\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api\r\n      .deleteCard(card._id, token)\r\n      .then((res) => {\r\n        setCards((state) => state.filter((c) => c._id !== card._id));\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  // handles for user\r\n  function handleUpdateUser(data) {\r\n    api\r\n      .setUserInfo(data, token)\r\n      .then((res) => {\r\n        setCurrentUser(res.data);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleUpdateAvatar(data) {\r\n    api\r\n      .setUserAvatar(data.avatar, token)\r\n      .then((res) => {\r\n        setCurrentUser(res.data);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  // handles for login logout and register\r\n  function handleLogin({ email, password }) {\r\n    setEmail(email);\r\n    if (!email || !password) {\r\n      console.log(\"fail\");\r\n      return;\r\n    }\r\n    console.log(\"success\");\r\n    auth\r\n      .login(password, email)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          setToken(data.token);\r\n          setLoggedIn(true);\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleLogout() {\r\n    console.log(\"logged out\");\r\n    setLoggedIn(false);\r\n    localStorage.removeItem(\"jwt\");\r\n    history.push(\"/\");\r\n  }\r\n\r\n  function handleRegister({ email, password }) {\r\n    auth\r\n      .register(password, email)\r\n      .then((res) => {\r\n        if (res) {\r\n          handleSuccessTooltip();\r\n          history.push(\"/signin\");\r\n          console.log(\"Register success\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        handleFailureTooltip();\r\n        console.log(\"Something went wrong.\");\r\n      });\r\n  }\r\n\r\n  // handles to open and close popups\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(props) {\r\n    setSelectedCard(props);\r\n  }\r\n\r\n  const handleSuccessTooltip = () => {\r\n    setInfoTooltip({\r\n      isOpen: true,\r\n      isSuccessful: true,\r\n    });\r\n  };\r\n\r\n  const handleFailureTooltip = () => {\r\n    setInfoTooltip({\r\n      isOpen: true,\r\n      isSuccessful: false,\r\n    });\r\n  };\r\n\r\n  function closeAllPopups() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setSelectedCard({});\r\n    setInfoTooltip({\r\n      isOpen: false,\r\n      isSuccessful: false,\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const closeByEscape = (e) => {\r\n      if (e.key === \"Escape\") {\r\n        closeAllPopups();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", closeByEscape);\r\n    return () => document.removeEventListener(\"keydown\", closeByEscape);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"page__container\">\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Switch>\r\n          <Route path=\"/signin\">\r\n            <Header link=\"/signup\" text=\"sign up\" />\r\n            <Login onLogin={handleLogin} />\r\n          </Route>\r\n          <Route path=\"/signup\">\r\n            <Header link=\"/signin\" text=\"Log in\" />\r\n            <Register onRegister={handleRegister} />\r\n          </Route>\r\n          <ProtectedRoute exact path=\"/\" loggedIn={loggedIn}>\r\n            <Header\r\n              link=\"/signin\"\r\n              text=\"Log in\"\r\n              loggedin={loggedIn}\r\n              email={email}\r\n              onSignOut={handleLogout}\r\n            />\r\n            <Main\r\n              onEditProfileClick={handleEditProfileClick}\r\n              onAddPlaceClick={handleAddPlaceClick}\r\n              onEditAvatarClick={handleEditAvatarClick}\r\n              onCardClick={handleCardClick}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete}\r\n              cards={cards}\r\n            />\r\n          </ProtectedRoute>\r\n        </Switch>\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlaceSubmit={handleAddPlaceSubmit}\r\n        />\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n        <InfoTooltip\r\n          isOpen={infoToolTip.isOpen}\r\n          isSuccessful={infoToolTip.isSuccessful}\r\n          onClose={closeAllPopups}\r\n        />\r\n        <Footer />\r\n      </CurrentUserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\"),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}